unbind-key C-b
set-option -g prefix C-a
bind-key C-s send-keys C-s
bind-key -n C-s send-prefix
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi V send-keys -X rectangle-toggle
if-shell 'command -v xclip >/dev/null 2>&1' \
  'bind-key -T copy-mode-vi y send-keys -X copy-pipe "xclip -i -sel clip"' \
  'bind-key -T copy-mode-vi y send-keys -X copy-selection'
bind-key -T copy-mode-vi Y send-keys -X copy-end-of-line

bind-key n new-window -ac "#{pane_current_path}"
bind-key N new-window -c "#{pane_current_path}"
bind-key % split-window -hc "#{pane_current_path}"
bind-key '"' split-window -vc "#{pane_current_path}"
bind-key J previous-window
bind-key K next-window
bind-key C-j swap-window -t -1
bind-key C-k swap-window -t +1
bind-key M-= select-layout tiled
bind-key j select-pane -D
bind-key k select-pane -U
bind-key h select-pane -L
bind-key l select-pane -R
bind-key -r - resize-pane -U
bind-key -r + resize-pane -D
bind-key -r < resize-pane -L
bind-key -r > resize-pane -R
bind-key r source-file ~/.tmux.conf \; \
  display-message 'reloaded config'
bind-key R set-environment -g NOPALETTE 1 \; \
  source-file ~/.tmux.conf \; \
  display-message 'reloaded config [no palette]'
bind-key C-l lock-session

set-option -s escape-time 0
set-option -s set-clipboard external
set-option -sa terminal-overrides ',gnome-256color:RGB,konsole-256color:RGB'

set-option -ga update-environment 'COLORTERM'
set-option -g display-time 2000
set-option -g history-limit 50000
if-shell 'command -v vlock >/dev/null 2>&1' \
  'set-option -g lock-command vlock'
if-shell 'command -v tlock >/dev/null 2>&1' \
  'set-option -g lock-command tlock'

set-option -g focus-events
set-option -g mouse on
set-option -g base-index 1
set-option -g renumber-windows on
set-option -g set-titles on
if-shell 'test -z "$SSH_CONNECTION"' \
  'set-option -g set-titles-string "#T (#W)"' \
  'set-option -g set-titles-string "[#h] #T (#W)"'

set-option -g status-keys vi
set-option -wg mode-keys vi
set-option -wg automatic-rename on
set-option -wg aggressive-resize on
set-option -wg pane-base-index 1
set-option -wg other-pane-height 15
set-option -wg main-pane-width 80
set-option -wg other-pane-width 60

set-option -g status on
set-option -g status-interval 1
set-option -g status-left-length 20
set-option -g status-right-length 60
set-option -wg window-status-format " #I) #T (#W) "
set-option -wg window-status-current-format " #I) #T "

run-shell 'sh ~/.tmux-conf.sh "#{client_termname}"'

source-file -q ~/.tmux.local.conf
